
# Commit Coach ‚Äì `/projects` Ê©üËÉΩÂÆüË£Ö„Çø„Çπ„ÇØ‰ªïÊßòÊõ∏
*(„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ: `apps/frontend/app/projects`)*

---

## „Ç¥„Éº„É´
1. **„ÄåË¶Å‰ª∂ÂÆöÁæ©„ÉªË®≠Ë®à„Äç„Äå„Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÈñãÁô∫„Äç„Äå„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÈÄ£Êê∫„ÉªAPIÂÆüË£Ö„Äç** „Åô„Åπ„Å¶„Åß
   - „Çø„Çπ„ÇØ / „Çµ„Éñ„Çø„Çπ„ÇØ„ÇíËá™Áî±„Å´ËøΩÂä†„ÉªÂ±ïÈñã„ÉªÂâäÈô§
   - Ë°å„Ç¢„Ç§„Ç≥„É≥ : `Ôºã` `{}` `üïí` `üóëÔ∏è` „ÅåÊ©üËÉΩ
2. **„Çµ„Éñ„Çø„Çπ„ÇØË°å** „ÅØ `Ôºã` „Å® `{}` „Çí **ÈùûË°®Á§∫**
3. **‰ΩôË®à„Å™„ÉÜ„Ç≠„Çπ„Éà„É°„Éã„É•„Éº**Ôºà‰æã:„ÄåÔºã Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä†„ÄçÔºâ„ÅØË°®Á§∫„Åó„Å™„ÅÑ
4. `üïí` „ÅßÈÅ∏Êäû„Åó„ÅüÈ†ÖÁõÆ„ÅØ `/dashboard` „Å´Âç≥ÂèçÊò†
5. ‰∏ÄÁï™‰∏ã„Å´ **„ÄåÔºã Êñ∞„Åó„ÅÑ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíËøΩÂä†„Äç** „Å†„Åë„ÇíÂõ∫ÂÆö

---

## „Éá„Ç£„É¨„ÇØ„Éà„É™ / Â§âÊõ¥„Éï„Ç°„Ç§„É´

| Á®ÆÂà• | „Éë„Çπ | ÁõÆÁöÑ |
|------|------|------|
| **NEW** | `apps/frontend/store/useProjects.ts` | Zustand „Ç∞„É≠„Éº„Éê„É´„Çπ„Éà„Ç¢ |
| **NEW** | `apps/frontend/components/ItemRow.tsx` | Ë°å UI („Ç¢„Ç§„Ç≥„É≥ & „Çø„Ç§„Éà„É´Á∑®ÈõÜ) |
| **NEW** | `apps/frontend/components/NestedList.tsx` | 3 ÈöéÂ±§„ÇíÂÜçÂ∏∞„É¨„É≥„ÉÄ„É™„É≥„Ç∞ |
| **MODIFY** | `apps/frontend/app/projects/page.tsx` | `NestedList` „ÇíÂëº„Å≥Âá∫„ÅôÁ∞°Á¥†Áâà„Å´Â∑Æ„ÅóÊõø„Åà |

> **import „Ç®„Ç§„É™„Ç¢„Çπ**
> `tsconfig.json` „Åß„Åô„Åß„Å´ `@/*` „Åå `apps/frontend/*` „ÇíÊåá„ÅôË®≠ÂÆö„ÅÇ„Çä„ÄÇ
> Êñ∞Ë¶è„Éï„Ç°„Ç§„É´„ÇíÁΩÆ„Åë„Å∞ `import { useProjects } from "@/store/useProjects"` „ÅåÈÄö„Çã„ÄÇ

---

## 0. ‰æùÂ≠òËøΩÂä†

```bash
cd apps/frontend
pnpm add zustand clsx
```

---

## 1. `store/useProjects.ts`

```tsx
import { create } from "zustand"

/* ÂûãÂÆöÁæ© */
export type Subtask = { id: string; title: string; completed: boolean }
export type Task    = { id: string; title: string; completed: boolean; expanded: boolean; subtasks: Subtask[] }
export type Project = { id: string; title: string; expanded: boolean; tasks: Task[] }

/* ÂàùÊúü„ÉÄ„Éü„Éº„Éá„Éº„Çø */
const mockProjects: Project[] = [
  {
    id: "project-1",
    title: "Ë¶Å‰ª∂ÂÆöÁæ©„ÉªË®≠Ë®à",
    expanded: true,
    tasks: [
      {
        id: "task-1",
        title: "„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊ∫ñÂÇô",
        completed: false,
        expanded: true,
        subtasks: [
          { id: "subtask-1-1", title: "„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÁõÆÁöÑ„Å®ÁØÑÂõ≤„ÅÆÂÆöÁæ©", completed: false },
          { id: "subtask-1-2", title: "‰∏ªË¶Å„Å™„Çπ„ÉÜ„Éº„ÇØ„Éõ„É´„ÉÄ„Éº„ÅÆÁâπÂÆö",  completed: false },
          { id: "subtask-1-3", title: "„Éó„É≠„Ç∏„Çß„ÇØ„ÉàË®àÁîªÊõ∏„ÅÆ‰ΩúÊàê",        completed: false },
        ],
      },
    ],
  },
  { id: "project-2", title: "„Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÈñãÁô∫",        expanded: false, tasks: [] },
  { id: "project-3", title: "„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÈÄ£Êê∫„ÉªAPIÂÆüË£Ö", expanded: false, tasks: [] },
]

type Store = {
  projects: Project[]
  selectedForDashboard: string[]
  /* CRUD & UI „Ç¢„ÇØ„Ç∑„Éß„É≥ */
  addProject: () => void
  deleteProject: (projectId: string) => void
  toggleProjectExpanded: (projectId: string) => void
  updateProjectTitle: (projectId: string, title: string) => void
  addTask: (projectId: string) => void
  deleteTask: (projectId: string, taskId: string) => void
  toggleTaskExpanded: (projectId: string, taskId: string) => void
  updateTaskTitle: (projectId: string, taskId: string, title: string) => void
  addSubtask: (projectId: string, taskId: string) => void
  deleteSubtask: (projectId: string, taskId: string, subtaskId: string) => void
  updateSubtaskTitle: (projectId: string, taskId: string, subtaskId: string, title: string) => void
  toggleComplete: (level:"task"|"subtask", ids:string[]) => void
  toggleDashboard: (id:string)=>void
  breakdown: (level:"project"|"task", ids:string[]) => void
}

export const useProjects = create<Store>((set) => ({
  projects: mockProjects,
  selectedForDashboard: [],

  /* --- Project --- */
  addProject: () =>
    set((s) => ({
      projects: [
        ...s.projects,
        { id: `project-${Date.now()}`, title: "Êñ∞„Åó„ÅÑ„Éó„É≠„Ç∏„Çß„ÇØ„Éà", expanded: true, tasks: [] },
      ],
    })),
  deleteProject: (projectId) =>
    set((s) => ({ projects: s.projects.filter((p) => p.id !== projectId) })),
  toggleProjectExpanded: (projectId) =>
    set((s) => ({
      projects: s.projects.map((p) => (p.id === projectId ? { ...p, expanded: !p.expanded } : p)),
    })),
  updateProjectTitle: (projectId, title) =>
    set((s) => ({
      projects: s.projects.map((p) => (p.id === projectId ? { ...p, title } : p)),
    })),

  /* --- Task --- */
  addTask: (projectId) =>
    set((s) => ({
      projects: s.projects.map((p) =>
        p.id === projectId
          ? {
              ...p,
              expanded: true,
              tasks: [
                ...p.tasks,
                {
                  id: `task-${Date.now()}`,
                  title: "Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ",
                  completed: false,
                  expanded: true,
                  subtasks: [],
                },
              ],
            }
          : p
      ),
    })),
  deleteTask: (projectId, taskId) =>
    set((s) => ({
      projects: s.projects.map((p) =>
        p.id === projectId ? { ...p, tasks: p.tasks.filter((t) => t.id !== taskId) } : p
      ),
    })),
  toggleTaskExpanded: (projectId, taskId) =>
    set((s) => ({
      projects: s.projects.map((p) =>
        p.id === projectId
          ? {
              ...p,
              tasks: p.tasks.map((t) =>
                t.id === taskId ? { ...t, expanded: !t.expanded } : t
              ),
            }
          : p
      ),
    })),
  updateTaskTitle: (projectId, taskId, title) =>
    set((s) => ({
      projects: s.projects.map((p) =>
        p.id === projectId
          ? {
              ...p,
              tasks: p.tasks.map((t) => (t.id === taskId ? { ...t, title } : t)),
            }
          : p
      ),
    })),

  /* --- Subtask --- */
  addSubtask: (projectId, taskId) =>
    set((s) => ({
      projects: s.projects.map((p) =>
        p.id === projectId
          ? {
              ...p,
              tasks: p.tasks.map((t) =>
                t.id === taskId
                  ? {
                      ...t,
                      expanded: true,
                      subtasks: [
                        ...t.subtasks,
                        {
                          id: `subtask-${Date.now()}`,
                          title: "Êñ∞„Åó„ÅÑ„Çµ„Éñ„Çø„Çπ„ÇØ",
                          completed: false,
                        },
                      ],
                    }
                  : t
              ),
            }
          : p
      ),
    })),
  deleteSubtask: (projectId, taskId, subtaskId) =>
    set((s) => ({
      projects: s.projects.map((p) =>
        p.id === projectId
          ? {
              ...p,
              tasks: p.tasks.map((t) =>
                t.id === taskId
                  ? { ...t, subtasks: t.subtasks.filter((st) => st.id !== subtaskId) }
                  : t
              ),
            }
          : p
      ),
    })),
  updateSubtaskTitle: (projectId, taskId, subtaskId, title) =>
    set((s) => ({
      projects: s.projects.map((p) =>
        p.id === projectId
          ? {
              ...p,
              tasks: p.tasks.map((t) =>
                t.id === taskId
                  ? {
                      ...t,
                      subtasks: t.subtasks.map((st) =>
                        st.id === subtaskId ? { ...st, title } : st
                      ),
                    }
                  : t
              ),
            }
          : p
      ),
    })),

  /* --- ÂÖ±ÈÄö --- */
  toggleComplete: (level, ids) =>
    set((s) => {
      const [pId, tId, stId] = ids
      return {
        projects: s.projects.map((p) => {
          if (p.id !== pId) return p
          if (level === "task") {
            return {
              ...p,
              tasks: p.tasks.map((t) =>
                t.id === tId ? { ...t, completed: !t.completed } : t
              ),
            }
          }
          if (level === "subtask") {
            return {
              ...p,
              tasks: p.tasks.map((t) =>
                t.id === tId
                  ? {
                      ...t,
                      subtasks: t.subtasks.map((st) =>
                        st.id === stId ? { ...st, completed: !st.completed } : st
                      ),
                    }
                  : t
              ),
            }
          }
          return p
        }),
      }
    }),

  toggleDashboard: (id) =>
    set((s) => ({
      selectedForDashboard: s.selectedForDashboard.includes(id)
        ? s.selectedForDashboard.filter((x) => x !== id)
        : [...s.selectedForDashboard, id],
    })),

  breakdown: () => alert("‰ªä„ÅØ„ÉÄ„Éü„Éº„Åß„Åô üöß"),
}))
```

---

## 2. `components/ItemRow.tsx`

```tsx
"use client"
import { useState, KeyboardEvent } from "react"
import {
  Trash2, Plus, Clock, Braces, ChevronDown, ChevronRight,
} from "lucide-react"
import clsx from "clsx"

type Props = {
  indent?: number
  hasChildren?: boolean
  expanded?: boolean
  onToggle?: () => void
  title: string
  onTitleChange: (v: string) => void
  onAdd?: () => void
  onBreakdown?: () => void
  onDelete: () => void
  onClock: () => void
  completed?: boolean
  onToggleComplete?: () => void
  isSubtask?: boolean
}

export const ItemRow = ({
  indent = 0,
  hasChildren,
  expanded,
  onToggle,
  title,
  onTitleChange,
  onAdd,
  onBreakdown,
  onDelete,
  onClock,
  completed,
  onToggleComplete,
  isSubtask,
}: Props) => {
  const [editing, setEditing] = useState(false)
  const [draft, setDraft] = useState(title)

  const finish = () => {
    onTitleChange(draft.trim() || title)
    setEditing(false)
  }
  const key = (e: KeyboardEvent) => {
    if (e.key === "Enter") finish()
    if (e.key === "Escape") {
      setDraft(title)
      setEditing(false)
    }
  }

  return (
    <div className="flex items-center gap-1 py-0.5" style={{ paddingLeft: indent }}>
      {/* Áü¢Âç∞ */}
      {hasChildren ? (
        <button onClick={onToggle} className="p-1 hover:bg-gray-100 rounded">
          {expanded ? <ChevronDown size={16} /> : <ChevronRight size={16} />}
        </button>
      ) : (
        <div style={{ width: 24 }} />
      )}

      {/* „ÉÅ„Çß„ÉÉ„ÇØ */}
      <input
        type="checkbox"
        checked={completed}
        onChange={onToggleComplete}
        className="mr-1 accent-black"
      />

      {/* „Çø„Ç§„Éà„É´ */}
      {editing ? (
        <input
          autoFocus
          value={draft}
          onChange={(e) => setDraft(e.target.value)}
          onBlur={finish}
          onKeyDown={key}
          className="flex-1 border rounded px-1 py-0.5 text-sm"
        />
      ) : (
        <span
          onDoubleClick={() => setEditing(true)}
          className={clsx("flex-1 text-sm", completed && "line-through text-gray-400")}
        >
          {title}
        </span>
      )}

      {/* „Ç¢„Ç§„Ç≥„É≥Áæ§ */}
      {!isSubtask && (
        <button onClick={onAdd} className="p-1 hover:bg-gray-100 rounded">
          <Plus size={16} />
        </button>
      )}
      {!isSubtask && (
        <button onClick={onBreakdown} className="p-1 hover:bg-gray-100 rounded">
          <Braces size={16} />
        </button>
      )}
      <button onClick={onClock} className="p-1 hover:bg-gray-100 rounded">
        <Clock size={16} />
      </button>
      <button onClick={onDelete} className="p-1 hover:bg-gray-100 rounded">
        <Trash2 size={16} />
      </button>
    </div>
  )
}
```

---

## 3. `components/NestedList.tsx`

```tsx
"use client"
import { useProjects } from "@/store/useProjects"
import { ItemRow } from "./ItemRow"

export const NestedList = () => {
  const s = useProjects()

  return (
    <>
      {s.projects.map((p) => (
        <div key={p.id} className="border rounded-lg px-3 py-2 space-y-1">
          {/* Project Ë°å */}
          <ItemRow
            hasChildren={p.tasks.length > 0}
            expanded={p.expanded}
            onToggle={() => s.toggleProjectExpanded(p.id)}
            title={p.title}
            onTitleChange={(t) => s.updateProjectTitle(p.id, t)}
            onAdd={() => s.addTask(p.id)}
            onBreakdown={() => s.breakdown("project", [p.id])}
            onDelete={() => s.deleteProject(p.id)}
            onClock={() => s.toggleDashboard(p.id)}
          />

          {/* Tasks */}
          {p.expanded &&
            p.tasks.map((t) => (
              <div key={t.id}>
                <ItemRow
                  indent={24}
                  hasChildren={t.subtasks.length > 0}
                  expanded={t.expanded}
                  onToggle={() => s.toggleTaskExpanded(p.id, t.id)}
                  title={t.title}
                  onTitleChange={(tt) => s.updateTaskTitle(p.id, t.id, tt)}
                  onAdd={() => s.addSubtask(p.id, t.id)}
                  onBreakdown={() => s.breakdown("task", [p.id, t.id])}
                  onDelete={() => s.deleteTask(p.id, t.id)}
                  onClock={() => s.toggleDashboard(t.id)}
                  completed={t.completed}
                  onToggleComplete={() => s.toggleComplete("task", [p.id, t.id])}
                />

                {/* Subtasks */}
                {t.expanded &&
                  t.subtasks.map((st) => (
                    <ItemRow
                      key={st.id}
                      indent={48}
                      hasChildren={false}
                      isSubtask
                      title={st.title}
                      onTitleChange={(tt) => s.updateSubtaskTitle(p.id, t.id, st.id, tt)}
                      onDelete={() => s.deleteSubtask(p.id, t.id, st.id)}
                      onClock={() => s.toggleDashboard(st.id)}
                      completed={st.completed}
                      onToggleComplete={() => s.toggleComplete("subtask", [p.id, t.id, st.id])}
                    />
                  ))}
              </div>
            ))}
        </div>
      ))}
    </>
  )
}
```

---

## 4. `app/projects/page.tsx`

ÔºàÂ∑Æ„ÅóÊõø„Åà„Çµ„É≥„Éó„É´„ÄÇSidebar / AICoachSidebar „ÅØÊó¢Â≠ò„ÅÆ„Åæ„ÅæÔºâ

```tsx
"use client"
import { Sidebar } from "@/components/sidebar"
import { AICoachSidebar } from "@/components/ai-coach-sidebar"
import { NestedList } from "@/components/NestedList"
import { Button } from "@/components/ui/button"
import { Plus } from "lucide-react"
import { useProjects } from "@/store/useProjects"

export default function ProjectsPage() {
  const addProject = useProjects((s) => s.addProject)

  return (
    <div className="flex h-screen">
      <Sidebar />
      <main className="flex-1 overflow-auto p-6 max-w-5xl mx-auto space-y-4">
        <h1 className="text-2xl font-bold mb-2"># „Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß</h1>

        <NestedList />

        <div className="flex justify-center">
          <Button variant="outline" className="border-dashed" onClick={addProject}>
            <Plus className="mr-2 h-4 w-4" />
            Êñ∞„Åó„ÅÑ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíËøΩÂä†
          </Button>
        </div>
      </main>
      <AICoachSidebar />
    </div>
  )
}
```

---

## 5. Âãï‰ΩúÁ¢∫Ë™çÊâãÈ†Ü

```bash
cd apps/frontend
pnpm dev
# http://localhost:3000/projects „ÇíÈñã„Åè
```

1. **Ôºã„Ç¢„Ç§„Ç≥„É≥** „Åß„Çø„Çπ„ÇØ / „Çµ„Éñ„Çø„Çπ„ÇØ„ÅåËøΩÂä†Âá∫Êù•„Çã
2. **{ }** „ÅØ„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®„Ç¢„É©„Éº„ÉàÔºà„ÉÄ„Éü„ÉºÔºâ
3. **üïí** „ÇíÊäº„Åó„ÅüÈ†ÖÁõÆ„ÅØ `/dashboard` „ÅßÁ¢∫Ë™ç
4. **üóëÔ∏è** „ÅßÂâäÈô§„ÄÅ„Çø„Ç§„Éà„É´„ÅØ **„ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØÁ∑®ÈõÜ**

---

## 6. Ê≥®ÊÑè

* **Redux / Supabase** „Å™„Å©‰ªñ„ÅÆÁä∂ÊÖã„Å®„ÅØÁã¨Á´ã„ÄÇË°ùÁ™Å„Åó„Å™„ÅÑ„ÄÇ
* Tailwind „ÇØ„É©„Çπ„ÅØÊó¢Â≠ò„Éá„Ç∂„Ç§„É≥„Å´Âêà„Çè„Åõ„Å¶ÊúÄÂ∞èÈôê„ÄÇ
* DnD ‰∏¶„ÅπÊõø„Åà„ÉªUndo Á≠â„ÅØÊú™ÂØæÂøú„ÄÇ

---

‰ª•‰∏ä„ÇíÂÆüË£Ö„Åô„Çã„Å®„ÄÅË¶ã„ÅüÁõÆ„ÅØÁèæÁä∂„ÇíÁ∂≠ÊåÅ„Åó„Å§„Å§„ÄåÊÑèÂë≥„ÅÆ„ÅÇ„Çã„Çø„Çπ„ÇØÂàÜËß£„Ç¢„Éó„É™„Äç„Å®„Åó„Å¶Âãï„Åç„Åæ„Åô„ÄÇ
