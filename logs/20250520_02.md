## âœ” èƒŒæ™¯ã¨èª²é¡Œ
ç¾åœ¨ã® **TaskItem** ã§ã¯ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯æ™‚ã«
- âœ… **ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ãƒˆã‚°ãƒ«**
- âœ… ã‚¿ã‚¹ã‚¯åã® **å–ã‚Šæ¶ˆã—ç·šã® ON/OFF**
ãŒç™ºç«ã—ã€**æ–‡å­—åˆ—ã®ç·¨é›†ãƒ¢ãƒ¼ãƒ‰**ã«ã¯å…¥ã‚Œã¾ã›ã‚“ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚¹ã‚¯åã‚’ç›´æ¥æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã€**ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…¥åŠ› â†’ ä¿å­˜ï¼‰** ã‚’çµ„ã¿è¾¼ã¿ã¾ã™ã€‚

---

## ğŸ—ºï¸ å®Ÿè£…æ¦‚è¦
1. **`isEditing` ã‚¹ãƒ†ãƒ¼ãƒˆ** ã‚’ã‚¿ã‚¹ã‚¯è¡Œå˜ä½ã§æŒã¤
2. ãƒ©ãƒ™ãƒ«ï¼ˆTypography ãªã©ï¼‰ã‚’ `onDoubleClick` ã§ **ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡æ›¿**
3. ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ä¸­ã¯ **`<TextField>`**ï¼ˆã¾ãŸã¯ `contentEditable`ï¼‰ã‚’æç”»ã—ã€`onBlur` ã¾ãŸã¯ **Enter / Esc** ã‚­ãƒ¼ã§ç¢ºå®š or ã‚­ãƒ£ãƒ³ã‚»ãƒ«
4. `Checkbox` ã‚¯ãƒªãƒƒã‚¯ã¨ç·¨é›†ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã‚’ **ã‚¤ãƒ™ãƒ³ãƒˆçš„ã«åˆ†é›¢**ï¼ˆ`e.stopPropagation()`ï¼‰
5. å¤‰æ›´å†…å®¹ã‚’ **API (`updateTask`)** ã§æ°¸ç¶šåŒ–
6. UI/UX: ç·¨é›†ä¸­ã¯å–ã‚Šæ¶ˆã—ç·šã‚’å¤–ã—ã€Esc ã§å…ƒã«æˆ»ã™

---

## ğŸ› ï¸ å…·ä½“çš„æ‰‹é † (ä¾‹: `frontend/src/features/tasks/components/TaskItem.tsx`)
```tsx
import { useState, useRef, useEffect, useCallback } from 'react';
import { Checkbox, Typography, TextField, ListItem } from '@mui/material';

export const TaskItem = ({ task }) => {
  const [isEditing, setIsEditing] = useState(false);
  const [title, setTitle]   = useState(task.title);
  const inputRef            = useRef<HTMLInputElement>(null);

  /* 1ï¸âƒ£ å®Œäº†ãƒˆã‚°ãƒ«ã¯ Checkbox ã ã‘ãŒæ‹…å½“ */
  const handleToggle = () => toggleTaskCompleted(task.id);

  /* 2ï¸âƒ£ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰é–‹å§‹ */
  const startEdit = (e: React.MouseEvent) => {
    e.stopPropagation();   // Checkbox ã® click ã‚’é˜»æ­¢
    setIsEditing(true);
  };

  /* 3ï¸âƒ£ å¤‰æ›´ç¢ºå®šãƒ­ã‚¸ãƒƒã‚¯ */
  const commit = useCallback(() => {
    const newTitle = title.trim();
    if (newTitle && newTitle !== task.title) {
      updateTask({ id: task.id, title: newTitle }); // â† API å‘¼ã³å‡ºã—
    } else {
      setTitle(task.title); // ç„¡å¤‰æ›´ãªã‚‰ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
    }
    setIsEditing(false);
  }, [title, task]);

  /* 4ï¸âƒ£ ãƒ•ã‚©ãƒ¼ã‚«ã‚¹åˆ¶å¾¡ */
  useEffect(() => { if (isEditing) inputRef.current?.focus(); }, [isEditing]);

  return (
    <ListItem divider disablePadding>
      <Checkbox checked={task.completed} onClick={handleToggle} />

      {isEditing ? (
        <TextField
          inputRef={inputRef}
          size="small"
          fullWidth
          value={title}
          onChange={e => setTitle(e.target.value)}
          onBlur={commit}
          onKeyDown={e => {
            if (e.key === 'Enter') commit();
            if (e.key === 'Escape') { setTitle(task.title); setIsEditing(false); }
          }}
          sx={{ ml: 1 }}
        />
      ) : (
        <Typography
          onDoubleClick={startEdit}
          sx={{
            ml: 1,
            flex: 1,
            cursor: 'text',
            textDecoration: task.completed ? 'line-through' : 'none'
          }}
        >
          {task.title}
        </Typography>
      )}

      {/* æ—¢å­˜ã®æ™‚åˆ»ãƒ»ï¼‹ãƒ»ã‚´ãƒŸç®±ã‚¢ã‚¤ã‚³ãƒ³ãªã©ã¯ãã®ã¾ã¾ */}
    </ListItem>
  );
};
````

### ğŸ”‘ ãƒã‚¤ãƒ³ãƒˆ

| ãƒã‚¤ãƒ³ãƒˆ                      | èª¬æ˜                           |
| ------------------------- | ---------------------------- |
| `stopPropagation()`       | ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯æ™‚ã«å®Œäº†ãƒˆã‚°ãƒ«ã‚’ç™ºç«ã•ã›ãªã„        |
| `useEffect` ã§ `autoFocus` | ã‚¯ãƒªãƒƒã‚¯ â†’ å³å…¥åŠ›å¯èƒ½                 |
| Enter / Blur              | è‡ªå‹•ä¿å­˜                         |
| Esc                       | å¤‰æ›´ã‚’ç ´æ£„ã—ã¦è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã¸æˆ»ã™              |
| `updateTask` API          | PATCH `/tasks/:id` ãªã©ã§ã‚¿ã‚¤ãƒˆãƒ«æ›´æ–° |

---

## â›ï¸ ã‚³ãƒ¼ãƒ‰å·®åˆ† (ãƒ‘ãƒƒãƒã‚¤ãƒ¡ãƒ¼ã‚¸)

```diff
- <Typography sx={{ textDecoration: completed ? 'line-through': 'none' }}>
-   {task.title}
- </Typography>
+ {isEditing ? (
+   <TextField ... />
+ ) : (
+   <Typography onDoubleClick={startEdit} ...>
+     {task.title}
+   </Typography>
+ )}
```

---

## ğŸ“š å‚è€ƒæ–‡çŒ®

* React ã§ã€Œãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ â†’ span â†” inputã€ç·¨é›†ã‚’å®Ÿè£…ã™ã‚‹åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³
* `contentEditable` ã‚’ React ã«çµ„ã¿è¾¼ã‚€éš›ã®æ³¨æ„ç‚¹ã¨ `dangerouslySetInnerHTML` ã‚µãƒ³ãƒ—ãƒ«
* LogRocket ã®æ±ç”¨ `Editable` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…ä¾‹ï¼ˆTab ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å‡¦ç†ï¼‰([blog.logrocket.com][1])

---

## âœ… æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. **ãƒ–ãƒ©ãƒ³ãƒ** `feature/edit-task-title` ã‚’åˆ‡ã‚‹
2. ä¸Šè¨˜å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ â†’ `pnpm dev` ã§å‹•ä½œç¢ºèª
3. PR ä½œæˆ & ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼

ä»¥ä¸Šã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼

```
```

[1]: https://blog.logrocket.com/build-inline-editable-ui-react/ "How to build an inline editable UI in React - LogRocket Blog"
