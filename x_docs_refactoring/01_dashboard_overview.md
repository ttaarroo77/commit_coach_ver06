---

title: "ダッシュボード概要 (v2 – 2 タブ構成)"
description: "Commit Coach ダッシュボードリファクタリングの上位仕様・範囲・UX ガイド。"
author: プロダクトチーム
lastUpdated: 2025-05-26
-----------------------

> **👀 ドキュメントを読みやすくする 5 つの工夫**
> 1️⃣ 冒頭にメタデータと **目次** を置き、全体像を一望できるようにする。
> 2️⃣ `In Scope / Out of Scope` を 1 画面に収めてスプリント範囲を明確化。
> 3️⃣ レイアウト図は **折りたたみ + Mermaid** で行ズレを防止。
> 4️⃣ 各章末に **📌 要点** を 1 行で記載し、流し読みでも要旨を把握。
> 5️⃣ コードや図はシンタックスハイライト付きフェンスで可読性を担保。

## 📑 目次

1. [目的](#1-目的)
2. [スコープ](#2-スコープ)
3. [用語集](#3-用語集)
4. [ユーザー体験](#4-ユーザー体験)
5. [機能要件](#5-機能要件)
6. [非機能要件](#6-非機能要件)
7. [状態管理](#7-状態管理)
8. [API 概要](#8-api-概要)
9. [エラーハンドリング](#9-エラーハンドリング)
10. [受け入れ基準](#10-受け入れ基準)
11. [未解決事項](#11-未解決事項)

---

## 1. 目的 <a id="1-目的"></a>

Commit Coach のダッシュボードを **2 つのタブ（`Plan` / `Work`）** レイアウトへ刷新し、これまで仕様化されていなかった **インライン編集フロー** を正式に組み込む。

📌 **要点:** 旧 `dashboard_overview.md` を完全に置き換える。

---

## 2. スコープ <a id="2-スコープ"></a>

### 2.1 対象範囲 (In Scope)

* UI を 2 主要タブへ全面再設計
* **CRUD**（プロジェクト／タスク／サブタスク）
* 階層 Drag & Drop 並び替え
* タブ間リアルタイム同期

### 2.2 対象外 (Out of Scope)

* グローバル設定ページ（別 Epic で管理）
* マルチユーザ同時編集・コメント機能

📌 **要点:** 開発対象を絞りスプリント目標をブレさせない。

---

## 3. 用語集 <a id="3-用語集"></a>

| 用語          | 定義                       |
| ----------- | ------------------------ |
| **エンティティ**  | プロジェクト・タスク・サブタスクの総称      |
| **Plan タブ** | ツリー UI で計画立案と順序変更を行う左タブ  |
| **Work タブ** | カンバン UI で実行とトラッキングを行う右タブ |
| **編集フロー**   | タイトル・説明・期日をインラインで編集する UX |

📌 **要点:** 用語を統一し、チーム内コミュニケーションロスを防ぐ。

---

## 4. ユーザー体験 <a id="4-ユーザー体験"></a>

### 4.1 タブラウト

<details>
<summary>📐 レイアウト図を表示</summary>

```mermaid
graph LR
    A[Sidebar 240 px] -- flex --> B(Main Area)
    B --> C(TopBar)
    C --> D(Tabs: Plan | Work)
    D --> E(Main Content)
```

</details>

### 4.2 カード階層

* **ProjectCard** > **TaskCard** > **SubtaskItem**
* 左 24 px = Drag ハンドル  •  右端 = アクションボタン ✏️ ＋ 🗑️

```ascii
┌────────────────────────────┐
│ ▣ Project Title      ＋ ✏️ 🗑️ │
├────────────────────────────┤
│  TaskCard …                │
└────────────────────────────┘
```

📌 **要点:** 構造が一目で分かるカード設計。

### 4.3 編集フロー（クイックリファレンス）

| トリガー               | 挙動                  |
| ------------------ | ------------------- |
| タイトルをダブルクリック       | `<input>` に切替＋フォーカス |
| ✏️ アイコンをクリック       | ポップオーバーで説明・期日を編集    |
| `Enter` / フォーカスアウト | `PATCH` → 楽観的 UI 保存 |
| `Esc`              | 編集キャンセル             |

📌 **要点:** 編集とドラッグの競合をゼロに。

---

## 5. 機能要件 <a id="5-機能要件"></a>

（※オリジナル表をここに貼り付けてください）

📌 **要点:** P0 の機能 8 件を確実に完了させる。

---

## 6. 非機能要件 <a id="6-非機能要件"></a>

* **パフォーマンス:** 初回レンダリング ≤ 200 ms、ドラッグ遅延 ≤ 16 ms
* **アクセシビリティ:** WCAG 2.1 AA、完全キーボード操作対応
* **国際化:** RTL レイアウト検証、文言は i18n ファイル管理

📌 **要点:** UX を速度・品質の両面で担保。

---

## 7. 状態管理 <a id="7-状態管理"></a>

```ts
interface RootStore {
  entities: Record<ProjectId, Project>
  order: string[]          // projectId の並び順
  editingItem: {
    type: "project" | "task" | "subtask"
    id: string
    field: "title" | "description" | "dueDate"
  } | null
  ui: { activeTab: "plan" | "work" }
}
```

📌 **要点:** `editingItem` がタブ間編集状態を保持する鍵。

---

## 8. API 概要 <a id="8-api-概要"></a>

| Method  | Endpoint           | Body (抜粋)                            | 説明       |
| ------- | ------------------ | ------------------------------------ | -------- |
| `POST`  | `/v1/projects`     | `{ title, description? }`            | プロジェクト作成 |
| `PATCH` | `/v1/projects/:id` | `{ title?, description?, dueDate? }` | プロジェクト更新 |
| `POST`  | `/v1/tasks`        | `{ projectId, title }`               | タスク作成    |

📌 **要点:** CRUD はすべて楽観的更新で UI を止めない。

---

## 9. エラーハンドリング <a id="9-エラーハンドリング"></a>

* 4xx/5xx 受信時、トースト＋**リトライ**ボタン表示
* サーバ拒否時は楽観的更新をロールバックし、編集 UI を再表示

📌 **要点:** 失敗パスを先に定義し、ユーザ驚きを防ぐ。

---

## 10. 受け入れ基準 <a id="10-受け入れ基準"></a>

1. Plan→Work タブ間でデータが即時同期される。
2. 並び替え後にページ再読み込みしても順序が保持される。
3. タイトル編集は両タブで同時反映される。
4. `409 Conflict` でも UI が破綻しない。
5. `Tab` キーで編集可能フィールドを順番に移動できる。
6. ドラッグ中に編集モードが発動しない。
7. インライン編集は `Enter` またはフォーカスアウトで必ず保存される。

📌 **要点:** “完了” の定義をコード着手前に固める。

---

## 11. 未解決事項 <a id="11-未解決事項"></a>

* サブタスク説明はリッチテキストかプレーンか？
* 期日は null 許容とするか？
* 長い説明の UI はツールチップかモーダルか？

📌 **要点:** 未決事項は次回ミーティングの議題リスト。

---

© 2025 Commit Coach プロダクトチーム
